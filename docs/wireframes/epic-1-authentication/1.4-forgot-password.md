# Wireframe: Forgot Password (Story 1.4 - Part 1)

**Page:** `/forgot-password`
**Status:** ðŸ“‹ Planned
**Story:** [docs/user-stories/epic-1-authentication/1.4-password-reset.md](../../user-stories/epic-1-authentication/1.4-password-reset.md)

---

## Layout Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚                         [Background]                           â”‚
â”‚                                                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚       Ubik Enterprise                â”‚              â”‚
â”‚         â”‚       Forgot Password                â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  Enter your email address and we'll  â”‚              â”‚
â”‚         â”‚  send you a link to reset your       â”‚              â”‚
â”‚         â”‚  password.                           â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚         â”‚  â”‚ Email                        â”‚   â”‚              â”‚
â”‚         â”‚  â”‚ [you@example.com_____]       â”‚   â”‚              â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚         â”‚  â”‚    Send reset link           â”‚   â”‚              â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚      Back to login                   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Specifications

### 1. Page Container
- **Layout:** Centered card on light background
- **Card:** White background, rounded corners, shadow
- **Max Width:** 448px (md breakpoint)
- **Padding:** 16px on mobile, 24px on desktop

### 2. Header Section
- **Title:** "Ubik Enterprise" - 30px, bold, center-aligned
- **Subtitle:** "Forgot Password" - 24px, semi-bold, center-aligned
- **Description:** "Enter your email address and we'll send you a link to reset your password." - 14px, muted text, center-aligned
- **Spacing:** 8px between elements

### 3. Form Fields

**Email Field:**
- Label: "Email" (14px, medium weight)
- Input box: Full width, 40px height
- Placeholder: "you@example.com"
- Type: email (for mobile keyboard optimization)
- Required: Yes

### 4. Submit Button

**Default State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Send reset link           â”‚  â† Blue background, white text
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Loading State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â³ Sending...               â”‚  â† Blue background, spinner
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Behavior:**
- Full width
- 40px height
- Shows spinner during form submission
- Text changes to "Sending..." when submitting
- Disabled during submission

### 5. Back Link
```
     Back to login
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â†‘ Link to /login
```
- Position: Below button, center-aligned
- Text: "Back to login"
- Link color: Blue
- Hover: Underline

---

## States & Interactions

### State 1: Initial Load (Empty Form)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Forgot Password                â”‚
â”‚                                      â”‚
â”‚  Enter your email address and we'll  â”‚
â”‚  send you a link to reset your       â”‚
â”‚  password.                           â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [________________]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Send reset link           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚      Back to login                   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 2: Loading (Form Submission)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Forgot Password                â”‚
â”‚                                      â”‚
â”‚  Enter your email address and we'll  â”‚
â”‚  send you a link to reset your       â”‚
â”‚  password.                           â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [john@example.com]           â”‚   â”‚ â† Disabled
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   â³ Sending...              â”‚   â”‚ â† Loading
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚      Back to login                   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 3: Success (Generic Message - Security)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Forgot Password                â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ… Password reset link sent to  â”‚â”‚
â”‚  â”‚    your email                   â”‚â”‚  â† Green banner
â”‚  â”‚                                 â”‚â”‚
â”‚  â”‚ If an account exists with this  â”‚â”‚
â”‚  â”‚ email, you will receive a       â”‚â”‚
â”‚  â”‚ password reset link within a    â”‚â”‚
â”‚  â”‚ few minutes.                    â”‚â”‚
â”‚  â”‚                                 â”‚â”‚
â”‚  â”‚ Please check your spam folder   â”‚â”‚
â”‚  â”‚ if you don't see it.            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [john@example.com]           â”‚   â”‚ â† Disabled
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Send reset link           â”‚   â”‚ â† Disabled
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚      Back to login                   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Success Message Details:**
- Green banner at top
- Icon: âœ… (checkmark)
- Main message: "Password reset link sent to your email"
- Subtext: "If an account exists with this email, you will receive a password reset link within a few minutes."
- Additional help: "Please check your spam folder if you don't see it."
- Email input disabled
- Submit button disabled (prevents spam)
- Back to login link remains active

**SECURITY NOTE:**
> Given I enter an email that doesn't exist in the system
> Then I see the same success message (for security)
> And no error reveals that the email doesn't exist

This prevents email enumeration attacks.

---

## User Flows

### Flow 1: Valid Email (Account Exists)
```
1. User enters email: john@example.com
2. User clicks "Send reset link"
3. Button changes to "Sending..." (disabled)
4. API request to POST /api/v1/auth/forgot-password
5. Success response
6. Success banner appears
7. Email sent with reset link (valid for 1 hour)
8. User checks email and clicks link
9. Redirected to /reset-password/[token]
```

### Flow 2: Invalid Email (Account Doesn't Exist)
```
1. User enters email: notfound@example.com
2. User clicks "Send reset link"
3. Button changes to "Sending..." (disabled)
4. API request to POST /api/v1/auth/forgot-password
5. Success response (same as valid email - security)
6. Success banner appears (same message)
7. No email sent (backend only)
8. User sees same success message (no hint email is invalid)
```

**Why?** Prevents attackers from discovering valid emails.

### Flow 3: Return to Login
```
1. User clicks "Back to login" link
2. Navigate to /login
3. Login form loads
```

---

## Validation Rules

### Client-Side Validation
1. **Email:** Required, valid email format

### Server-Side Validation
1. **Email existence:** Check if email exists (but don't reveal in response)
2. **Rate limiting:** Max 3 requests per email per hour
3. **Token generation:** Create cryptographically random token if email exists
4. **Email sending:** Send email only if account exists

---

## Accessibility

### Keyboard Navigation
- Tab order: Email â†’ Send reset link button â†’ Back to login link
- Enter key: Submit form (when focused on email input)

### Screen Reader Annotations
- Success banner: `role="alert"`
- Form: `aria-live="polite"` for state changes
- Submit button: `aria-disabled="true"` when loading

### ARIA Labels
- Email input: `aria-label="Email address"`
- Submit button: `aria-label="Send password reset link"`
- Success message: `aria-describedby="reset-success"`

### Focus Management
- Success: Focus on success banner (for screen readers)
- Error: Focus on email input

---

## Technical Implementation Notes

**API Endpoint:**
- `POST /api/v1/auth/forgot-password`
- Request body: `{ email }`
- Response: Generic success message (always 200 OK)

**Email Service:**
- Requires email service integration (SendGrid, AWS SES, etc.)
- Email template includes:
  - Reset link: `https://app.ubik.com/reset-password/[TOKEN]`
  - Expiration notice: "This link expires in 1 hour"
  - Help text: "If you didn't request this, ignore this email"

**Security Measures:**
1. **Generic response:** Always return success, never reveal if email exists
2. **Rate limiting:** Max 3 requests per email per hour (prevent spam)
3. **Token security:** 256-bit cryptographically random token
4. **Token expiration:** 1 hour
5. **Single-use tokens:** Mark as used after password reset

**Database Requirements:**
```sql
password_reset_tokens table:
- id (UUID, PK)
- employee_id (UUID, FK)
- token (VARCHAR, unique)
- expires_at (TIMESTAMP)
- used_at (TIMESTAMP, nullable)
- created_at (TIMESTAMP)
```

---

## Design Decisions

1. **Generic success message** - Security: prevents email enumeration
2. **Descriptive instructions** - Users know what to expect
3. **Back to login link** - Easy navigation if user remembers password
4. **Disabled form after success** - Prevents spam, clear visual feedback
5. **Helpful subtext** - "Check spam folder" reduces support requests
6. **No resend button immediately** - Rate limiting prevents abuse

---

## Responsive Behavior

**Mobile (320px - 767px):**
- Card full width with 16px padding
- Font sizes slightly smaller
- Touch-friendly 44px minimum touch targets

**Desktop (1024px+):**
- Centered card, max-width 448px
- Larger padding (24px)
- Hover states on inputs and buttons

---

## Email Template

```
Subject: Reset your Ubik Enterprise password

Hi [Name],

We received a request to reset your password for Ubik Enterprise.

Click the link below to reset your password:
[Reset Password Button/Link]

This link will expire in 1 hour.

If you didn't request a password reset, you can safely ignore this email.

Thanks,
The Ubik Team
```

---

## Related Pages

- **Login:** `/login` - Return to login page
- **Reset password:** `/reset-password/[token]` - Next step after clicking email link

---

**Last Updated:** 2025-11-09
**Status:** Planned ðŸ“‹
**Priority:** P2 (Medium)
**Issue:** #155
