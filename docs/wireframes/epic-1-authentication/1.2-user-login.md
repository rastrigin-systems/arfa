# Wireframe: User Login (Story 1.2)

**Page:** `/login`
**Status:** ðŸš§ Needs Implementation
**Story:** [docs/user-stories/epic-1-authentication/1.2-user-login.md](../../user-stories/epic-1-authentication/1.2-user-login.md)

---

## Layout Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚                         [Background]                           â”‚
â”‚                                                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚       Ubik Enterprise                â”‚              â”‚
â”‚         â”‚       Welcome Back                   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚         â”‚  â”‚ Email                        â”‚   â”‚              â”‚
â”‚         â”‚  â”‚ [you@example.com_____]       â”‚   â”‚              â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚         â”‚  â”‚ Password                     â”‚   â”‚              â”‚
â”‚         â”‚  â”‚ [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢____________]       â”‚   â”‚              â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚         Forgot password?             â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚         â”‚  â”‚        Login                 â”‚   â”‚              â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â”‚  Don't have an account? Sign up     â”‚              â”‚
â”‚         â”‚                                      â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Specifications

### 1. Page Container
- **Layout:** Centered card on light background
- **Card:** White background, rounded corners, shadow
- **Max Width:** 448px (md breakpoint)
- **Padding:** 16px on mobile, 24px on desktop

### 2. Header Section
- **Title:** "Ubik Enterprise" - 30px, bold, center-aligned
- **Subtitle:** "Welcome Back" - 14px, muted text, center-aligned
- **Spacing:** 8px between title and subtitle

### 3. Form Fields

**Field Order:**
1. Email
2. Password

**Each Field Contains:**
- Label (14px, medium weight)
- Input box (full width, 40px height)
- Error state styling (red border + red text)

### 4. Forgot Password Link
```
        Forgot password?
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â†‘ Link to /forgot-password
```
- Position: Below password field, right-aligned
- Text: "Forgot password?"
- Link color: Blue
- Hover: Underline

### 5. Submit Button

**Default State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Login                â”‚  â† Blue background, white text
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Loading State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â³ Logging in...           â”‚  â† Blue background, spinner
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Disabled State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Login                â”‚  â† Gray background, cursor not-allowed
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Behavior:**
- Full width
- 40px height
- Shows spinner during form submission
- Text changes to "Logging in..." when submitting
- Disabled during submission (prevents double-submit)

### 6. Footer Link
```
Don't have an account? Sign up
                       â”€â”€â”€â”€â”€â”€â”€
                       â†‘ Link to /signup
```

---

## States & Interactions

### State 1: Initial Load (Empty Form)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Welcome Back                   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [________________]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Password                     â”‚   â”‚
â”‚  â”‚ [________________]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚         Forgot password?             â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Login                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  Don't have an account? Sign up     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 2: Invalid Credentials (Error)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Welcome Back                   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âš ï¸ Invalid credentials          â”‚â”‚  â† Red banner
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [john@example.com]           â”‚   â”‚ â† Red border
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Password                     â”‚   â”‚
â”‚  â”‚ [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                   â”‚   â”‚ â† Red border
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚         Forgot password?             â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Login                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  Don't have an account? Sign up     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Error Display:**
- Red banner at top of form
- Text: "âš ï¸ Invalid credentials"
- Red border on email and password inputs
- Form data preserved (email remains filled)
- Password field cleared for security

### State 3: Loading (Form Submission)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚       Ubik Enterprise                â”‚
â”‚       Welcome Back                   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email                        â”‚   â”‚
â”‚  â”‚ [john@example.com]           â”‚   â”‚ â† Disabled
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Password                     â”‚   â”‚
â”‚  â”‚ [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                   â”‚   â”‚ â† Disabled
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚         Forgot password?             â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   â³ Logging in...           â”‚   â”‚ â† Loading state
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  Don't have an account? Sign up     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Loading Behavior:**
- All inputs disabled
- Submit button shows spinner + "Logging in..."
- Links remain clickable (user can cancel)
- Prevents form resubmission

### State 4: Auto-Redirect (Already Authenticated)
**User Story Requirement:**
> Given I am already authenticated (have valid session)
> When I navigate to /login
> Then I am automatically redirected to /dashboard

**Implementation:**
- Page checks for valid session on mount
- If session exists, immediate redirect to /dashboard
- No form shown to user
- Optional: Brief loading indicator during check

---

## User Flows

### Flow 1: Successful Login
```
1. User enters email: john@example.com
2. User enters password: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
3. User clicks "Login"
4. Button changes to "Logging in..." (disabled)
5. API request sent to POST /api/v1/auth/login
6. Success: Session token received
7. Token stored in httpOnly cookie
8. Redirect to /dashboard
```

### Flow 2: Invalid Credentials
```
1. User enters email: john@example.com
2. User enters password: wrongpass
3. User clicks "Login"
4. Button changes to "Logging in..." (disabled)
5. API request sent
6. Error: 401 Unauthorized
7. Error banner appears: "Invalid credentials"
8. Inputs get red border
9. Password field cleared
10. Button re-enabled
11. User can retry
```

### Flow 3: Navigate to Signup
```
1. User clicks "Sign up" link
2. Navigate to /signup
3. Registration form loads
```

### Flow 4: Navigate to Forgot Password
```
1. User clicks "Forgot password?" link
2. Navigate to /forgot-password
3. Password reset flow begins
```

### Flow 5: Already Authenticated
```
1. User has valid session cookie
2. User navigates to /login (manually or via link)
3. Page checks session validity
4. Valid session detected
5. Automatic redirect to /dashboard
6. No login form shown
```

### Flow 6: Explicit Logout Required
**User Story Requirement:**
> Given I want to log in as a different user
> When I am currently logged in
> Then I must first click "Logout" from the navigation menu

**Implementation:**
- Logout button in main navigation (visible when authenticated)
- Clicking logout:
  1. Calls POST /api/v1/auth/logout
  2. Clears session cookie
  3. Redirects to /login
  4. User can now login with different credentials

---

## Validation Rules

### Client-Side Validation
1. **Email:** Required, valid email format
2. **Password:** Required (no strength check on login)

### Server-Side Validation
1. **Credentials:** Email + password must match existing employee
2. **Session:** Create new session on successful login

---

## Accessibility

### Keyboard Navigation
- Tab order: Email â†’ Password â†’ Forgot password link â†’ Login button â†’ Sign up link
- Enter key: Submit form (when focused on any input)
- Escape key: Clear current field (optional)

### Screen Reader Annotations
- Error banner: `role="alert"`
- Form-level error: `aria-live="polite"`
- Loading state: `aria-busy="true"` on form
- Submit button: `aria-disabled="true"` when loading

### ARIA Labels
- Email input: `aria-label="Email address"`
- Password input: `aria-label="Password"`
- Submit button: `aria-label="Login to your account"`
- Error banner: `aria-describedby="login-error"`

### Focus Management
- Error: Focus on email field when error occurs
- Success: No focus change (redirect happens)
- Loading: Focus remains on submit button

---

## Technical Implementation Notes

**API Endpoint:**
- `POST /api/v1/auth/login`
- Request body: `{ email, password }`
- Response: Session token in httpOnly cookie
- Error: 401 Unauthorized

**Session Check (for auto-redirect):**
- On page mount, check for valid session cookie
- Can use middleware or client-side fetch to `/api/v1/auth/me`
- If valid, redirect to /dashboard
- If invalid, show login form

**Logout Endpoint:**
- `POST /api/v1/auth/logout`
- Clears session cookie
- Redirects to /login

**React Implementation:**
- Use React Server Actions with `useFormState` and `useFormStatus`
- Form action: `loginAction`
- Loading state managed by `useFormStatus().pending`

---

## Design Decisions

1. **Simple, clean layout** - Login should be fast and straightforward
2. **Error banner at top** - Immediately visible to user
3. **Preserve email on error** - User doesn't retype email
4. **Clear password on error** - Security best practice
5. **Loading state with disabled inputs** - Prevent double-submission
6. **Auto-redirect when authenticated** - Better UX, prevents confusion
7. **Explicit logout required** - Security: users must intentionally switch accounts
8. **Forgot password link prominent** - Below password field, easy to find

---

## Responsive Behavior

**Mobile (320px - 767px):**
- Card full width with 16px padding
- Font sizes slightly smaller
- Touch-friendly 44px minimum touch targets

**Desktop (1024px+):**
- Centered card, max-width 448px
- Larger padding (24px)
- Hover states on inputs and buttons

---

## Related Pages

- **Sign up:** `/signup` - User registration flow
- **Forgot password:** `/forgot-password` - Password reset request
- **Dashboard:** `/dashboard` - Post-login destination

---

**Last Updated:** 2025-11-09
**Status:** Needs Implementation ðŸš§
**Priority:** P0 (Critical)
