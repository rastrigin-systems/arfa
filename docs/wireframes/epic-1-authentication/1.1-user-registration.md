# Wireframe: User Registration (Story 1.1)

**Page:** `/signup`
**Status:** ✅ Already Implemented
**Story:** [docs/user-stories/epic-1-authentication/1.1-user-registration.md](../../user-stories/epic-1-authentication/1.1-user-registration.md)

---

## Layout Overview

```
┌────────────────────────────────────────────────────────────────┐
│                                                                │
│                         [Background]                           │
│                                                                │
│         ┌──────────────────────────────────────┐              │
│         │                                      │              │
│         │       Ubik Enterprise                │              │
│         │  Create Your Organization Account    │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Full Name                    │   │              │
│         │  │ [John Doe____________]       │   │              │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Email                        │   │              │
│         │  │ [you@example.com_____]       │   │              │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Organization Name            │   │              │
│         │  │ [Acme Corporation____]       │   │              │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Organization Slug            │   │              │
│         │  │ [acme________________] ✓     │   │  ← Validation indicator
│         │  │ ✓ Available                  │   │
│         │  └──────────────────────────────┘   │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Password                     │   │              │
│         │  │ [••••••••____________]       │   │              │
│         │  │ Password strength: Strong    │   │  ← Strength indicator
│         │  │ ✓ 8+ characters              │   │
│         │  │ ✓ Uppercase letter           │   │
│         │  │ ✓ Number                     │   │
│         │  │ ✓ Special character          │   │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │ Confirm Password             │   │              │
│         │  │ [••••••••____________]       │   │              │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  ┌──────────────────────────────┐   │              │
│         │  │   Create Account             │   │              │
│         │  └──────────────────────────────┘   │              │
│         │                                      │              │
│         │  Already have an account? Sign in   │              │
│         │                                      │              │
│         └──────────────────────────────────────┘              │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

## Component Specifications

### 1. Page Container
- **Layout:** Centered card on light background
- **Card:** White background, rounded corners, shadow
- **Max Width:** 512px (lg breakpoint)
- **Padding:** 16px on mobile, 24px on desktop

### 2. Header Section
- **Title:** "Ubik Enterprise" - 30px, bold, center-aligned
- **Subtitle:** "Create Your Organization Account" - 14px, muted text, center-aligned
- **Spacing:** 8px between title and subtitle

### 3. Form Fields

**Field Order:**
1. Full Name
2. Email
3. Organization Name
4. Organization Slug (with real-time validation)
5. Password (with strength indicator)
6. Confirm Password

**Each Field Contains:**
- Label (14px, medium weight)
- Input box (full width, 40px height)
- Validation message area (below input)
- Error state styling (red border + red text)
- Success state styling (green border for slug)

### 4. Organization Slug Field (Special Behavior)

**Default State:**
```
┌──────────────────────────────────┐
│ Organization Slug                │
│ [acme________________]           │
│                                  │
└──────────────────────────────────┘
```

**Checking State (debounced 500ms):**
```
┌──────────────────────────────────┐
│ Organization Slug                │
│ [acme________________] ⏳        │
│ Checking availability...         │
└──────────────────────────────────┘
```

**Available State:**
```
┌──────────────────────────────────┐
│ Organization Slug                │
│ [my-company-2025_____] ✓         │
│ ✓ Available                      │  ← Green text
└──────────────────────────────────┘
```

**Taken State:**
```
┌──────────────────────────────────┐
│ Organization Slug                │
│ [acme________________] ✗         │
│ ✗ This slug is already taken     │  ← Red text
└──────────────────────────────────┘
```

**Behavior:**
- Input converts to lowercase automatically
- 500ms debounce before checking availability
- Green checkmark (✓) + green border when available
- Red X (✗) + red border when taken
- Submit button disabled when slug is taken

### 5. Password Field (Special Behavior)

**Default State (Empty):**
```
┌──────────────────────────────────┐
│ Password                         │
│ [________________]               │
│ Password strength: Weak          │  ← Gray text
│ ○ 8+ characters                  │
│ ○ Uppercase letter               │
│ ○ Number                         │
│ ○ Special character              │
└──────────────────────────────────┘
```

**Weak Password:**
```
┌──────────────────────────────────┐
│ Password                         │
│ [pass________]                   │
│ Password strength: Weak          │  ← Red text
│ ✗ 8+ characters                  │  ← Red
│ ✗ Uppercase letter               │  ← Red
│ ✗ Number                         │  ← Red
│ ✗ Special character              │  ← Red
└──────────────────────────────────┘
```

**Medium Password:**
```
┌──────────────────────────────────┐
│ Password                         │
│ [Password123_]                   │
│ Password strength: Medium        │  ← Amber text
│ ✓ 8+ characters                  │  ← Green
│ ✓ Uppercase letter               │  ← Green
│ ✓ Number                         │  ← Green
│ ✓ Special character              │  ← Green
└──────────────────────────────────┘
```

**Strong Password:**
```
┌──────────────────────────────────┐
│ Password                         │
│ [Password123!]                   │
│ Password strength: Strong        │  ← Green text
│ ✓ 8+ characters                  │  ← Green
│ ✓ Uppercase letter               │  ← Green
│ ✓ Number                         │  ← Green
│ ✓ Special character              │  ← Green
└──────────────────────────────────┘
```

**Behavior:**
- Real-time validation as user types
- Inline requirement checklist
- Color-coded strength indicator
- Requirements must all be met for form submission

### 6. Submit Button

**Default State:**
```
┌──────────────────────────────┐
│     Create Account           │  ← Blue background, white text
└──────────────────────────────┘
```

**Disabled State (slug taken):**
```
┌──────────────────────────────┐
│     Create Account           │  ← Gray background, disabled
└──────────────────────────────┘
```

**Loading State:**
```
┌──────────────────────────────┐
│  ⏳ Creating Account...      │  ← Blue background, spinner
└──────────────────────────────┘
```

**Behavior:**
- Full width
- 40px height
- Disabled when slug is unavailable
- Shows spinner during form submission
- Text changes to "Creating Account..." when submitting

### 7. Footer Link
```
Already have an account? Sign in
                         ──────
                         ↑ Link to /login
```

---

## States & Interactions

### State 1: Initial Load (Empty Form)
- All fields empty
- Slug validation indicator hidden
- Password strength shows "Weak" with empty circles
- Submit button enabled (but form validation will prevent submission)

### State 2: Typing Slug (Real-Time Validation)
- User types "acme"
- After 500ms, API checks availability
- Shows "⏳ Checking availability..." during API call
- Updates to ✓ or ✗ based on result

### State 3: Slug Taken
- Red X icon next to input
- Red border on input
- Red error text: "This slug is already taken"
- Submit button disabled

### State 4: Slug Available
- Green ✓ icon next to input
- Green border on input
- Green success text: "✓ Available"
- Submit button enabled (if other fields valid)

### State 5: Typing Password
- Real-time strength calculation
- Requirements update as user types
- Checkmarks appear when requirements met

### State 6: Password Invalid
- Missing requirements shown in red
- Form submission blocked (client-side validation)

### State 7: Form Submission
- Submit button shows "Creating Account..." with spinner
- All inputs disabled during submission
- Prevents double-submission

### State 8: Server Error
- Error banner appears at top of form
- Error message from server (e.g., "Email already in use")
- Form remains populated with user's data
- Submit button re-enabled

### State 9: Success
- Redirect to /dashboard
- Session token stored in httpOnly cookie

---

## Validation Rules

### Client-Side Validation
1. **Full Name:** Required, 2+ characters
2. **Email:** Required, valid email format
3. **Organization Name:** Required, 2+ characters
4. **Organization Slug:** Required, 3+ characters, lowercase letters/numbers/hyphens only
5. **Password:** Required, 8+ chars, uppercase, number, special character
6. **Confirm Password:** Required, must match password

### Server-Side Validation
1. **Slug Uniqueness:** Check against existing organizations
2. **Email Uniqueness:** Check against existing employees
3. **Password Strength:** Enforce same requirements

---

## Accessibility

### Keyboard Navigation
- Tab order: Full Name → Email → Org Name → Org Slug → Password → Confirm Password → Submit → Sign in link
- Enter key: Submit form (when focused on any input)
- Escape key: Clear current field (optional)

### Screen Reader Annotations
- All inputs have proper labels
- Error messages have `role="alert"`
- Validation messages linked via `aria-describedby`
- Loading state announced via `aria-live="polite"`

### ARIA Labels
- Slug input: `aria-invalid="true"` when taken
- Password input: `aria-invalid="true"` when weak
- Submit button: `aria-disabled="true"` when disabled
- Form-level error: `role="alert"`

### Focus Management
- Error fields automatically focused
- First invalid field focused on submit attempt

---

## Technical Implementation Notes

**Current Implementation (services/web/app/(auth)/signup/page.tsx):**
- Uses React Server Actions with `useFormState` and `useFormStatus`
- `PasswordStrengthIndicator` component handles password validation
- `SlugAvailabilityCheck` component handles slug validation
- Form submission via `signupAction`
- Proper accessibility with ARIA labels

**API Endpoint:**
- `POST /api/v1/auth/register`
- Returns session token on success

**Success Flow:**
1. Form submitted
2. API creates organization + employee
3. Session token returned in cookie
4. Redirect to /dashboard

---

## Design Decisions

1. **Real-time slug validation** - Immediate feedback prevents submission errors
2. **Inline password requirements** - Users see exactly what's needed
3. **Visual validation indicators** - ✓ and ✗ provide instant feedback
4. **Disabled submit button** - Prevents invalid submissions
5. **Loading state** - Clear feedback during async operations
6. **Color coding** - Green = success, Red = error, Amber = warning
7. **Confirm password field** - Added for extra security (not in original story but standard practice)

---

## Responsive Behavior

**Mobile (320px - 767px):**
- Card full width with 16px padding
- Font sizes slightly smaller
- Touch-friendly 44px minimum touch targets

**Desktop (1024px+):**
- Centered card, max-width 512px
- Larger padding (24px)
- Hover states on inputs and buttons

---

**Last Updated:** 2025-11-09
**Status:** Implemented ✅
**Next Steps:** None - page complete and working
