# Story 1.2: User Login

**As a** registered user
**I want to** log in with my email and password
**So that** I can access my organization's AI agent management dashboard

**Priority:** P0 (Critical)
**Status:** ðŸš§ In Progress (Login works, auto-redirect & explicit logout needed)
**Endpoints:** `POST /api/v1/auth/login`, `POST /api/v1/auth/logout`
**UI:** `/login`, logout button in navigation

## Acceptance Criteria

```gherkin
Given I am on the login page
When I enter a valid email and password
And I click "Login"
Then I am authenticated and receive a session token
And I am redirected to the dashboard (/dashboard)
And my session token is stored in an httpOnly cookie

Given I am on the login page
When I click "Login" with invalid credentials
Then I see an error message "Invalid credentials"
And I remain on the login page
And no session token is created

Given I am submitting the login form
When I click "Login"
Then the button shows "Logging in..." while the request is processing
And the button is disabled during submission
And the button returns to "Login" after completion

Given I am on the login page and don't have an account
When I click "Sign up"
Then I am redirected to the signup page (/signup)

Given I am already authenticated (have valid session)
When I navigate to /login
Then I am automatically redirected to /dashboard
And I see my dashboard without having to log in again

Given I want to log in as a different user
When I am currently logged in
Then I must first click "Logout" from the navigation menu
And my session is cleared
And I am redirected to /login
And I can now log in with different credentials

Given I forgot my password
When I am on the login page
Then I see a "Forgot password?" link below the login button
And clicking it takes me to /forgot-password (see Issue #155)
```

## Implementation Notes

- Email and password are required fields
- Session token stored in httpOnly cookie named `ubik_token`
- No "remember me" option (session-based only)
- **Auto-redirect:** Authenticated users visiting /login are redirected to /dashboard
- **Explicit logout required:** Users must logout before switching accounts
- **Forgotten password:** Link to /forgot-password flow (tracked in Issue #155)
- Form uses React Server Actions with `useFormState` and `useFormStatus`
- Logout button must be easily discoverable in navigation UI

## Related
- [1.3 User Logout](./1.3-user-logout.md)
- [1.4 Password Reset](./1.4-password-reset.md)
- Issue #155 - Password reset implementation
- [Epic 1 Overview](./README.md)
- [Back to All Stories](../README.md)
